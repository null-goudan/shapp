<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>同学助校园顺手捎网-个人中心</title>
    <link rel="stylesheet" href="{% static '/lib/layui-v2.6.3/css/layui.css' %}">
    <script src="{% static 'lib/layui-v2.6.3/layui.js' %}"></script>
    <link rel="stylesheet"   href="{% static '/css/index.css' %}"/>
    <script src="{% static 'lib/jquery-3.4.1/jquery-3.4.1.min.js' %}"></script>
</head>
<body>
     
  <header>
    <div class="log">同学助校园顺手捎网</div>
    <nav>
      <a href="/">首页</a>
      <a href="/ #showcases">在线接单</a>
      <a href="/user/take">在线下单</a>
      <a href="/user/information">个人中心</a>
      <a href="/user/houtai_login">后台登录</a>
      <a href="#"><i class="fas fa-search"></i></a> 
    </nav>
    <div class="burger">
      <div class="burger-line1"></div>
      <div class="burger-line2"></div>
      <div class="burger-line3"></div>
    </div>
  </header>
   
     <div style="width: 100%; background-color: #dddde1;">
           <div id="content" style="margin:10px auto 0 auto;">
      
        <div class="layui-row layui-col-space15 " >
            <!-- 左侧栏 -->
        <div id="content-left"class="layui-col-md3" style="margin-top: 25px;" >

           
                 <h1 style="font-size: 20px;height: 50px; background-color: #393d49; color: white;"> <strong style="font-size: 30px;">个</strong>人中心</h1>
             <ul class="layui-nav layui-nav-tree" lay-filter="test" style="width: 100%;margin-bottom: 20px;">
                <!-- 侧边导航: <ul class="layui-nav layui-nav-tree layui-nav-side"> -->
                   
                  <li class="layui-nav-item " style="background-color: #4E5465;" ><a href=""style="width:195px; ">我的信息</a></li>
                  <li class="layui-nav-item"><a href="/user/send" style="width: 195px;">我发出的</a></li>
                  <li class="layui-nav-item"><a href="/user/help" style="width: 195px;">我帮助的</a></li>
                  <li class="layui-nav-item"><a href="" style="width: 195px;">我的积分</a></li>
                  <li class="layui-nav-item"><a href="/user/password" style="width: 195px;">修改密码</a></li>
                </ul>

            
      </div>
      
         <!-- 右侧栏 -->
          <div class="layui-col-md9" id="fabu" style="background-color: white;   border:1px solid #cccccc; margin: 30px 0; padding: 0;">
            
            <table class="layui-table" lay-skin="nob" style="margin:0 auto;">
                <colgroup>
                  <col width="100">
                  <col width="200">
                </colgroup>

                <tbody>
                  <tr>
                    <td>用户名</td>
                    <td id="username_index">user-1</td>
                  </tr>

                  <tr>
                    <td>真实姓名</td>
                    <td id="name_index">张三</td>
                  </tr>

                  <tr>
                    <td>性别</td>
                    <td id="sex_index">男</td>
                  </tr>

                  <tr>
                    <td>学号</td>
                    <td id="student_num">541107090222</td>
                  </tr>

                  <tr>
                    <td>电子邮箱</td>
                    <td id="email_index">1161400732@qq.com</td>
                  </tr>

                  <tr>
                    <td>余额</td>
                    <td id="money">1000</td>
                  </tr>
                </tbody>
              </table>
                

              <div class="layui-btn-container" style="margin-top: 20px;margin-left: 50px;">
                   <div class="layui-input-inline" style="margin-left: 200px;">
                    <button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn" id="edit">编辑信息</button>
                </div>

              </div>

              <div class="xiugai layui-form layuimini-form" hidden="hidden">   
                <form class="layui-form layui-form-pane" action="">
                    <div class="layui-form-item">
                    <label class="layui-form-label">用户名</label>
                    <div class="layui-input-block">
                        <input type="text" name="username" lay-verify="username" id="username" autocomplete="off" class="layui-input">
                    </div>
                </div>
            
                <div class="layui-form-item">
                    <label class="layui-form-label">真实姓名</label>
                    <div class="layui-input-block">
                        <input type="text" name="name"  readonly="true" id="name" lay-verify="required" autocomplete="off"  class="layui-input">
                    </div>
                </div>
                
                <div class="layui-form-item">
                  <label class="layui-form-label">性别</label>
                  <div class="layui-input-block">
                      <select name="sex" id="sex" lay-verify="">  
                  <option value="男">男</option>
                  <option value="女">女</option>
                </select>   
                  </div>                
                </div>
                 
                <div class="layui-form-item">
                    <label class="layui-form-label">学号</label>
                    <div class="layui-input-block">
                        <input type="text" name="schoolnumber" readonly="true" id="schoolnumber"lay-verify="required" autocomplete="off" class="layui-input">
                    </div>
                </div>
                
                <div class="layui-form-item">
                    <label class="layui-form-label">电子邮箱</label>
                    <div class="layui-input-block">
                        <input type="text" name="email" id="email" lay-verify="required|email" autocomplete="off" class="layui-input">
                    </div>
                </div>
                
                <div class="layui-form-item">
                    <label class="layui-form-label">余额</label>
                    <div class="layui-input-block">
                        <input type="text" name="reward" readonly="true" id="reward" lay-verify="required" autocomplete="off" readonly="true" class="layui-input">
                    </div>
                </div>           
            </form>
            
                <div class="layui-form-item">
                    <div class="layui-input-block">
                      <button class="layui-btn layui-btn save" lay-submit lay-filter="saveBtn" id="save_btn">确认保存</button>
                    </div>
                </div>
              </div>
               
            </div>
            </div>
            
            
               
        </div>
        </div>
       </div>
      
       </div>
       
       <footer style="margin-top: 0;">
        <div class="footer-menus">
          <div class="contact-us">
            <p class="menu-title">联系我们</p>
            <p>电话：9999-999-999</p>
            <p>电子邮件：shunshoushao@163.com</p>
          </div>
          <div class="service-menu footer-menu">
            <p class="menu-title">意见反馈</p>
            <ul class="menu-items">
              <li><a href="#">常见问题</a></li>
              <li><a href="#">如何付费</a></li>
              <li><a href="#">如何下单</a></li>
            </ul>
          </div>
          <div class="service-menu footer-menu">
            <p class="menu-title">关于我们</p>
            <ul class="menu-items">
              <li><a href="#">窝嫩叠顺手捎介绍</a></li>
              <li><a href="#">合作伙伴</a></li>
            </ul>
          </div>
          <div class="service-menu footer-menu">
            <p class="menu-title">帮助与支持</p>
            <ul class="menu-items">
              <li><a href="#">帮助中心</a></li>
              <li><a href="#">联系客服</a></li>
              <li><a href="#">文档资源</a></li>
            </ul>
          </div>
          <p class="icp-info">蜀ICP备99999999号</p>
          <p class="rights">&copy; 窝嫩叠顺手捎有限公司</p>
          <div class="scroll-to-top">
            <a href="#"><i class="fas fa-chevron-up"></i></a>
          </div>
        </div>
      </footer>

  <script rel="script">
            $.ajax({
                    url: '/user/information/get/',
                    type: 'get',
                    dataType: 'json',
                    success: function (data) {
                        $('#username_index').text(data['data'][0]['username'])
                        $('#name_index').text(data['data'][0]['name'])
                        $('#sex_index').text(data['data'][0]['sex'])
                        $('#email_index').text(data['data'][0]['email'])
                        $('#student_num').text(data['data'][0]['stu_num'])
                        $('#money').text(data['data'][0]['money'])
                    }
                }
            )
        </script>

      <script>
      //注意：导航 依赖 element 模块，否则无法进行功能性操作
      layui.use('element', function(){
        var element = layui.element;
      });
    //时间模块
      layui.use('laydate',function(){
        var laydate=layui.laydate;

        laydate.render({
            elem:"#date1",
            type:"datetime"
        })

        laydate.render({
            elem:"#date2",
            type:"datetime"
        })
    })
    $.ajax({
             url:'/user/information/get/',
              // type:'POST',
              dataType:'json',
              success:function(data){
               layui.use(['form', 'table'], function () {
            var $ = layui.jquery,
            form = layui.form,
            table = layui.table;

            $("#edit").on("click",function(obj){
                  var index= layer.open({
                    title: '详情',
                    type: 1,
                    shade: 0,
                    maxmin:true,
                    shadeClose: true,
                    area: ['50%', '50%'],
                    content: $('.xiugai'),
                    success: function(layero, index){
                         $("#username").val(data.data[0].username)
                         $("#name").val(data.data[0].name);
                         $("#sex").val(data.data[0].sex);
                         $("#schoolnumber").val(data.data[0].stu_num);
                         $("#email").val(data.data[0].email);
                         $("#reward").val(data.data[0].money);
                     },
                });
            $(".save").on("click", function (){
                $.ajax(
                    {
                        url:'/user/information/get/',
                        method:'post',
                        datatype:'json',
                        data:{
                            username:$("#username").val(),
                            sex:$("#sex").val(),
                            email:$("#email").val(),
                        },
                        success:function (data){
                            layer.msg(data['msg']);
                        }
                    }
                )
            })
                $(window).on("resize", function () {
                    layer.full(index);
                });            
                return false;
});
      })
              }
    })
      

        
      </script>
</body>
</html>